{% extends "dashboard/layouts/base.html" %}
{% load static %}
{% block title %}Edit Landing Page{% endblock %}

{% block content %}
<script src="{% static 'ckeditor/ckeditor.js' %}"></script>
<link rel="stylesheet" href="{% static 'ckeditor/samples/css/samples.css' %}" />


<div class="container mt-4">
  <h2>Edit Landing Page for {{ page.product.name }}</h2>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="mb-3">
      <label class="form-label">Landing Page Code</label>
      <input type="text" name="code" class="form-control" value="{{ landingpage.code }}">
    </div>

    <h4>Display Options</h4>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="show_state" {% if landingpage.show_state %}checked{% endif %}>
      <label class="form-check-label">Show State</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="show_city" {% if landingpage.show_city %}checked{% endif %}>
      <label class="form-check-label">Show City</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="show_address" {% if landingpage.show_address %}checked{% endif %}>
      <label class="form-check-label">Show Address</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="show_final_cost" {% if landingpage.show_final_cost %}checked{% endif %}>
      <label class="form-check-label">Show Final Cost</label>
    </div>

    <div class="mb-3">
        <label class="form-label">Thank You Page</label>
        <textarea name="thank_you_html" id="editor" rows="10" class="form-control">
                <div class="container" dir="rtl">
            <div class="success-icon" style="text-align:center"><strong><span style="color:#2ecc71"><span style="font-family:Verdana,Geneva,sans-serif"><span dir="rtl"><span style="font-size:26px">تم الطلب بنجاح!</span></span></span></span></strong></div>

            <p style="text-align:center"><span style="color:#ffffff"><span style="font-family:Verdana,Geneva,sans-serif"><span dir="rtl"><span style="font-size:26px"><span style="background-color:#27ae60">شكراً لشرائك من متجرنا. تم تأكيد طلبك وهو الآن في طريقه إليك!</span></span></span></span></span></p>
            </div>
        </textarea>
    </div>

    
    <label for="pixels">Facebook Pixels:</label>
    <select name="pixels" id="pixels" class="form-control" multiple>
    {% for pixel in pixels %}
        <option value="{{ pixel.id }}" 
        {% if pixel in landingpage.pixels.all %}
            selected
        {% endif %}>
            {{ pixel.firt_chars_pixel_code }}
        </option>
    {% endfor %}
    </select>
    <br>



        <div class="accordion" id="accordionExample">
    <div class="accordion-item">
         <h2 class="accordion-header" id="flush-headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                Overrides (optional)
            </button>
        </h2>
        <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
            <div class="accordion-body">
                <div class="mb-3">
                <label class="form-label">Custom Name</label>
                <input type="text" name="custom_name" class="form-control" value="{{ landingpage.name }}">
                </div>

                <div class="mb-3">
                <label class="form-label">Custom Description</label>
                <textarea name="custom_description" class="form-control">{{ landingpage.description }}</textarea>
                </div>

                <div class="mb-3">
                <label class="form-label">Custom Image</label><br>
                {% if landingpage.custom_image %}
                    <img src="{{ landingpage.image }}" alt="Custom Image" width="100"><br>
                {% endif %}
                <input type="file" name="custom_image" class="form-control">
                </div>

                <div class="mb-3">
                <label class="form-label">Custom Price</label>
                <input type="number" step="0.01" name="custom_price" class="form-control" value="{{ landingpage.price }}">
                </div>

                <div class="mb-3">
                <label class="form-label">Custom Fake Price</label>
                <input type="number" step="0.01" name="custom_fake_price" class="form-control" value="{{ landingpage.fake_price }}">
                </div>

                <div class="mb-3">
                <label class="form-label">Custom Webhook</label>
                <input type="text" name="custom_webhook" class="form-control" value="{{ landingpage.webhook }}">
                </div>
            </div>
        </div>
    </div>



    <br>
    <button type="submit" class="btn btn-success">Save Changes</button>
    <a href="{% url 'landingpages:list' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>

<script src="{% static 'ckeditor/samples/js/sample.js' %}"></script>
<script>
	initSample();
</script>
{% endblock %}
